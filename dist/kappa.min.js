"use strict";!function(e){function t(){return"undefined"!=typeof Storage&&null!==previousStorage||new Promise(a)}function a(t,a){e.get("https://twitchemotes.com/api_cache/v2/global.json",function(e){"undefined"!=typeof Storage&&null!==previousStorage&&localStorage.setItem("kappa-js",JSON.stringify(e)),t(e)})}var n=void 0;try{localStorage.getItem("kappa-js")}catch(o){}null===previousStorage?t().then(function(e){window.KappaJS=e}):window.KappaJS=JSON.parse(localStorage.getItem("kappa-js")),e.fn.kappa=function(t){function a(e,t){var a=e.image_id;return['<img src="',KappaJS.template[l.emoteSize].replace("{image_id}",a),'" ',null===l.customClass?"":'class="'+l.customClass+'" ','alt="',t,'">'].join("")}function o(){var e=setInterval(function(){"undefined"!=typeof window.KappaJS&&(i(),clearInterval(e))},500)}function i(){"undefined"==typeof n&&(n=new RegExp("\\b("+Object.keys(KappaJS.emotes).join("|")+")\\b","g")),e(p).each(function(t,o){e(o).html(e(o).html().replace(n,function(e,t){return a(KappaJS.emotes[t],t)}))})}var p=this,l=e.extend({customClass:null,emoteSize:"small"},t);"undefined"==typeof window.KappaJS?o():i()}}(jQuery);